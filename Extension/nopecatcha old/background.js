(()=>{{let e="1",t="hcaptcha::hook";async function n(){return new Promise(a=>{chrome.scripting.getRegisteredContentScripts().then(i=>{a(i.map(u=>u.id))})})}let r=chrome.runtime.getManifest(),o=r.content_scripts.filter(a=>a.js.includes("eventhook.js")).map(a=>a.matches),s=r.content_scripts.filter(a=>a.js.includes("captcha/hcaptcha.js")).map(a=>a.matches);n().then(a=>{let i=[];!a.includes(e)&&o.length&&i.push({id:e,matches:o.flat(),js:["eventhook/loader.js"],runAt:"document_start",allFrames:!0,world:"MAIN"}),!a.includes(t)&&s.length&&i.push({id:t,matches:s.flat(),js:["captcha/hook.js"],runAt:"document_start",allFrames:!0,world:"MAIN"}),i.length&&chrome.scripting.registerContentScripts(i)})}var w=chrome;var V="https://api.nopecha.com";var f="https://www.nopecha.com",we="https://developers.nopecha.com",Ye="https://nopecha.com/api-reference/",O={doc:{url:we,automation:{url:`${we}/guides/extension_advanced/#automation-build`}},ref:{url:Ye},api:{base:V,recognition:"/v1/recognition",status:"/v1/status"},www:{url:f,annoucement:{url:`${f}/json/announcement.json`},demo:{url:`${f}/captcha`,hcaptcha:{url:`${f}/captcha/hcaptcha`},recaptcha:{url:`${f}/captcha/recaptcha`},funcaptcha:{url:`${f}/captcha/funcaptcha`},awscaptcha:{url:`${f}/captcha/awscaptcha`},textcaptcha:{url:`${f}/captcha/textcaptcha`},turnstile:{url:`${f}/captcha/turnstile`},perimeterx:{url:`${f}/captcha/perimeterx`},geetest:{url:`${f}/captcha/geetest`},lemincaptcha:{url:`${f}/captcha/lemincaptcha`}},manage:{url:`${f}/manage`},pricing:{url:`${f}/pricing`},setup:{url:`${f}/setup`}},discord:{url:`${f}/discord`},github:{url:`${f}/github`,release:{url:`${f}/github/release`}}};var xe="en",Qe="en",Me="en";var ve=["sub_frame","stylesheet","script","image","font","object","xmlhttprequest","ping","csp_report","media","websocket","webtransport","webbundle","other"];{let e=function({id:n,key:r,value:o,replaceOnly:s=!1,regexFilter:a,resourceTypes:i=ve}){return{id:n,priority:1,action:{type:"redirect",redirect:{transform:{queryTransform:{addOrReplaceParams:[{key:r,value:o,replaceOnly:s}]}}}},condition:{regexFilter:a,resourceTypes:i}}},t=function({id:n,regexSubstitution:r,regexFilter:o,resourceTypes:s=ve}){return{id:n,priority:1,action:{type:"redirect",redirect:{regexSubstitution:r}},condition:{regexFilter:o,resourceTypes:s}}};w.declarativeNetRequest.updateDynamicRules({addRules:[e({id:1,key:"hl",value:xe,replaceOnly:!0,regexFilter:"^https?://([^\\.]*\\.)?hcaptcha\\.com",resourceTypes:["sub_frame","script"]}),t({id:2,regexSubstitution:`https://\\1/i18n/${xe}.json`,regexFilter:"^https?://(([^\\.]*\\.)?hcaptcha\\.com/.*)/i18n/[a-z]{2}(-[A-Z]{2})?\\.json$",resourceTypes:["xmlhttprequest"]}),e({id:3,key:"hl",value:Qe,replaceOnly:!1,regexFilter:"^https?://[^\\.]*\\.(google\\.com|recaptcha\\.net)/recaptcha",resourceTypes:["sub_frame","script"]}),e({id:4,key:"lang",value:Me,replaceOnly:!0,regexFilter:"^https?://[^\\.]*\\.(funcaptcha\\.com?|arkoselabs\\.c(om|n)|arkose\\.com\\.cn)/fc"}),e({id:5,key:"mkt",value:Me,replaceOnly:!1,regexFilter:"^https?://[^\\.]*\\.(funcaptcha\\.com?|arkoselabs\\.c(om|n)|arkose\\.com\\.cn)",resourceTypes:["sub_frame"]})],removeRuleIds:[1,2,3,4,5]})}var E=new Map;chrome.tabs.onUpdated.addListener((e,t)=>{E.has(e)&&!("url"in t)||E.set(e,new Set)});chrome.tabs.onRemoved.addListener(e=>{E.delete(e)});async function Se([e],t){let n=t.tab?.id;n&&(E.has(n)||E.set(n,new Set),E.get(n).add(e))}async function Re(){let e=await new Promise(t=>{w.tabs.query({active:!0,currentWindow:!0},([n])=>{t(n)})});return E.has(e.id)?[...E.get(e.id)]:[]}function Te(e){let t=("56f6edc6a3a062849786fffdcf0404240468fe65e349e40f669f34ea818acece"+e).split("").map(n=>n.charCodeAt(0));return Pe(t)}var ke=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let n=8;n--;)t=t&1?3988292384^t>>>1:t>>>1;ke[e]=t}function Pe(e){let t=-1;for(let n of e)t=t>>>8^ke[t&255^n];return(t^-1)>>>0}function Be(e,t){return t.tab.url}function ae(){return new Promise(e=>{w.tabs.query({active:!0,currentWindow:!0},([t])=>e(t))})}async function U(){return(await ae()).id}async function Ce(){let e=await ae();return e&&e.url&&new URL(e.url).href}async function Ie(){let e=await ae();return JSON.stringify(e)}function B(e){return new Promise(t=>setTimeout(t,e))}function se(e,t=2166136261){let n=t;for(let r of e)n^=r,n+=n<<1;return n>>>0}var Ze=30,N=[];function ie(e,t){let n;if(!t.method||t.method==="GET"){let o=new URLSearchParams(e.split("?")[1]).get("id");if(!o)return;let s=N.find(a=>{let i=a.postres[a.postres.length-1];return!i?.responseBody||!("data"in i.responseBody)?!1:i?.responseBody?.data===o});s&&(n=s.id,s.getreq={time:+new Date,url:e,options:t})}else for(n=""+[+new Date,performance.now(),Math.random()],N.push({id:n,postreq:{time:+new Date,url:e,options:t},getreq:{time:0,url:"",options:{}},postres:[],getres:[]});N.length>Ze;)N.shift();return n}function G(e,t){let n=N.find(r=>r.id===e);n&&(n.getreq.time?(n.getres.push({time:+new Date,...t}),t.responseBody&&"data"in t.responseBody&&(n.answer=t.responseBody.data)):n.postres.push({time:+new Date,...t}))}function Ee(){return JSON.stringify(N)}var L={version:18,key:"",keys:[],enabled:!0,disabled_hosts:[],base_api:"",awscaptcha_auto_open:!1,awscaptcha_auto_solve:!1,awscaptcha_solve_delay_time:1e3,awscaptcha_solve_delay:!0,geetest_auto_open:!1,geetest_auto_solve:!1,geetest_solve_delay_time:1e3,geetest_solve_delay:!0,funcaptcha_auto_open:!0,funcaptcha_auto_solve:!0,funcaptcha_solve_delay_time:1e3,funcaptcha_solve_delay:!0,hcaptcha_auto_open:!0,hcaptcha_auto_solve:!0,hcaptcha_solve_delay_time:3e3,hcaptcha_solve_delay:!0,lemincaptcha_auto_open:!1,lemincaptcha_auto_solve:!1,lemincaptcha_solve_delay_time:1e3,lemincaptcha_solve_delay:!0,perimeterx_auto_solve:!1,perimeterx_solve_delay_time:1e3,perimeterx_solve_delay:!0,recaptcha_auto_open:!0,recaptcha_auto_solve:!0,recaptcha_solve_delay_time:2e3,recaptcha_solve_delay:!0,textcaptcha_auto_solve:!1,textcaptcha_image_selector:"",textcaptcha_input_selector:"",textcaptcha_solve_delay_time:100,textcaptcha_solve_delay:!0,turnstile_auto_solve:!0,turnstile_solve_delay_time:5e3,turnstile_solve_delay:!0};var Y=w.action,ue=!0;function ce(e){if(e===ue)return;ue=e;let t=e?"":"g",n=[new Promise(r=>{Y.setIcon({path:Object.fromEntries([16,32,48,128].map(o=>[o,`/icon/${o}${t}.png`]))},r)})];return Q&&n.push(new Promise(r=>{Y.setBadgeText({text:e?Q:""},r)})),Promise.all(n)}var Q="";function Z(e,t){if(e!==Q)return Q=e,Promise.all([new Promise(n=>{if(!ue)return n();Y.setBadgeText({text:e},n)}),new Promise(n=>{Y.setBadgeBackgroundColor({color:t},n)})])}var le=new Set,de=new Set;w.runtime.onConnect.addListener(e=>{e.name==="stream"?(le.add(e),e.onDisconnect.addListener(()=>{le.delete(e)})):e.name==="broadcast"&&(de.add(e),e.onDisconnect.addListener(()=>{de.delete(e)}))});function $e(e){le.forEach(t=>t.postMessage(e))}async function Ae(e){let t=await U();e={data:e,event:"broadcast"},de.forEach(n=>{n.sender?.tab?.id!==void 0&&t===n.sender?.tab?.id&&n.postMessage(e)})}L.base_api=L.base_api||V;var ge=new Promise(e=>{w.storage.local.get("settings",t=>{if(!t?.settings)return e(L);let{settings:n}=t;n.version!==L.version&&(n={...L,key:n.key}),n={...L,...n},n.base_api=V,n.base_api=n.base_api||V,n.enabled||ce(!1),e(n)})});function j(){return ge}async function Fe(e){let t={...await ge,...e};return ce(t.enabled),new Promise(n=>{w.storage.local.set({settings:t},()=>{ge=Promise.resolve(t),$e({event:"settingsUpdate",settings:e}),n(null)})})}var et=[15,16,12,10,17];async function De(e){let t=new Headers;t.append("accept","application/json"),t.append("content-type","application/json");let n=typeof e.v=="string"?se(e.v.split("").map(d=>d.charCodeAt(0))):-1;e.key&&e.key!=="undefined"&&t.append("authorization",`Basic ${e.key}`);let r=e.type;if(!r)return{error:-2,message:"Unknown error occured"};let a=`${(await j()).base_api||O.api.base}${O.api.recognition}/${r}`,i;for(let d=30;d>0&&n===2385114784;d--){let h=ie(a,{method:"POST",headers:t,body:e}),g=await fetch(a,{method:"POST",headers:t,body:JSON.stringify(e)});if(g.status>=500){G(h,{response:g,attempts:d}),await B(1e3);continue}let l=await g.json();if(G(h,{response:g,responseBody:l,attempts:d}),"error"in l){if(et.includes(l.error))return l;l.error,11,await B(1e3)}else{i=l.data;break}}if(!i)return{error:-1,message:"Server timeout"};t.delete("content-type");let u,c=`${a}?id=${i}&key=${e.key}`;for(let d=60;d>0;d--){u=ie(c,{headers:t});let h=await fetch(c,{headers:t});if(h.status>=500){G(u,{response:h,attempts:d}),await B(1e3);continue}let g=await h.json();if(G(u,{response:h,responseBody:g,attempts:d}),"error"in g)g.error,14,await B(1e3);else return g}return u&&G(u,{failed:!0}),{error:-1,message:"Server timeout"}}function Le(){let e;return t=>e||(e=t().finally(()=>e=void 0),e)}var tt=w.runtime.getManifest().version,ee=null,nt=Le();function te(){return nt(()=>rt())}async function Oe(){return ee===null&&(ee=await te()),ee}async function rt(){let e=new Headers;e.append("accept","application/json");let t=new URLSearchParams;t.append("v",tt);let n=await j(),r=n.key;r&&(t.append("key",r),e.append("authorization",`Basic ${r}`));let s=`${n.base_api||O.api.base}${O.api.status}?${t.toString()}`,a,i=null;try{i=await fetch(s,{method:"GET",headers:e}),a=await i.json()}catch{let c="Unknown error occurred";i?i.status===502?c="Server has routing issues":i.status===522?c="Server not responding":c=`Unknown server error: ${i.status}`:c="Server connection failure",a={error:-1,message:c}}if(i&&!i.ok&&(!a||!("error"in a))&&(a={error:-1,message:`Server error: ${i.status}`}),"error"in a)Z("Err","#fde047");else if(typeof a.credit=="number"&&typeof a.quota=="number"){let c=a.credit>=9999?`${Math.floor(a.credit/a.quota*100)}`:a.credit.toString();Z(c,a.credit?"#0a95ff":"#fb7185")}else Z("","#ffffff00");return ee=a,a}te();async function Ue([e,t]){let n=await fetch(e,t);return{headers:Object.fromEntries(n.headers.entries()),status:n.status,ok:n.ok,text:await n.text()}}async function Ne([e,t,n=3e4]){let r=new AbortController,o=setTimeout(()=>{try{r.abort("timeout")}catch{}},n);try{let s=await fetch(e,{...t,signal:r.signal}),a=await s.blob(),i=new FileReader;return await new Promise(u=>{i.addEventListener("load",u),i.readAsDataURL(a)}),{headers:Object.fromEntries(s.headers.entries()),status:s.status,ok:s.ok,data:i.result,mime:a.type}}catch(s){throw new Error(`fetch failed: ${s instanceof Error?s.message:String(s)}`)}finally{clearTimeout(o)}}async function Ge(e){!e&&(e=await U(),!e)||chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["lib/selector.js","locate.js"],world:"ISOLATED",injectImmediately:!0})}var je={left:1,right:2,middle:4,back:8,forward:16,none:0};function T(){return chrome.debugger!==void 0}async function I(){try{let e=await chrome.tabs.query({active:!0,currentWindow:!0});return e.length===0?null:e[0].id}catch{return null}}var C=new Map,fe=new Map,H=new Set;T()&&(chrome.debugger.onEvent.addListener(async(t,n,r)=>{if(!t.tabId)return;let o=t.tabId,s=t.sessionId??"root";C.has(o)||C.set(o,new Map);let a=C.get(o);if(n==="Target.attachedToTarget"){let{sessionId:i,targetInfo:u}=r;fe.set(u.targetId,i),a.has(i)||a.set(i,[]);try{let c={tabId:o,sessionId:i};await chrome.debugger.sendCommand(c,"DOM.enable"),await chrome.debugger.sendCommand(c,"Runtime.enable")}catch{}}else if(n==="Target.detachedFromTarget")fe.delete(r.targetId),a.delete(r.sessionId);else if(n==="Runtime.executionContextCreated"){let{id:i,auxData:u}=r.context;if(u&&u.isDefault){let c=a.get(s)||[];c.push({contextId:i,frameId:u.frameId}),a.set(s,c)}}else if(n==="Runtime.executionContextDestroyed"){let i=a.get(s);if(i){let u=i.filter(c=>c.contextId!==r.executionContextId);a.set(s,u)}}}),chrome.debugger.onDetach.addListener((t,n)=>{t.tabId&&(H.delete(t.tabId),C.delete(t.tabId))}));async function re(e){if(!T()||(e=e??await I(),e===null))return!1;try{return await chrome.debugger.attach({tabId:e},"1.3"),H.add(e),C.has(e)||C.set(e,new Map),!0}catch(t){return t.message.includes("already attached")?(H.add(e),!0):!1}}async function Je(e){if(!T()||(e=e??await I(),e===null))return!1;try{return await chrome.debugger.detach({tabId:e}),H.delete(e),C.delete(e),!0}catch(t){return t.message.includes("not attached")?(H.delete(e),C.delete(e),!0):!1}}async function v(e,t,n={},r){if(!T()||(e=e??await I(),e===null)||!H.has(e)&&!await re(e))return null;try{let o={tabId:e,sessionId:r};return await chrome.debugger.sendCommand(o,t,n)}catch{return null}}async function $(e){if(!T()||(e=e??await I(),e===null))return!1;await re(e);let t=C.get(e);return t.has("root")||t.set("root",[]),await v(e,"Page.enable"),await v(e,"DOM.enable"),await v(e,"Runtime.enable"),await v(e,"Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!1,flatten:!0}),!0}async function ze(e,t){let n=await v(e,"Page.getLayoutMetrics",{},t);return n&&n.cssContentSize?{w:n.cssContentSize.width,h:n.cssContentSize.height}:null}async function _e(e,t,n,r,o){let a=0,i=t,u=n,c=r,d=o,h=0,g=0,l=null,R=null,A=null,F=null;for(;a++<50;){let m=await v(e,"Page.getFrameTree",{},u),_=m?he(m.frameTree,i):null;if(_===null)return null;if(!_.parentId){let p=await ze(e);return p!==null&&(h=p.w,g=p.h),{x:c,y:d,w:h,h:g,fx:l??0,fy:R??0,fw:A??h,fh:F??g}}let x=_.parentId,b=fe.get(x);b===void 0&&u!==void 0&&he(m.frameTree,x)!==null&&(b=u);try{let p=await v(e,"DOM.getFrameOwner",{frameId:i},b);if(p===null||!p.backendNodeId)throw new Error(`could not get owner for frame ${i}`);let S=0,k=0,q=0,J=0,D=!1;try{let M=await v(e,"DOM.getBoxModel",{backendNodeId:p.backendNodeId},b);M&&M.model&&M.model.content&&(S=M.model.content[0],k=M.model.content[1],q=M.model.width,J=M.model.height,D=!0)}catch{}if(!D)try{let M=await v(e,"DOM.resolveNode",{backendNodeId:p.backendNodeId},b);if(M&&M.object){let y=await v(e,"Runtime.callFunctionOn",{objectId:M.object.objectId,functionDeclaration:`function() {
                                const r = this.getBoundingClientRect();
                                const s = window.getComputedStyle(this);
                                return {
                                    x: r.left + this.clientLeft + (parseFloat(s.paddingLeft) || 0),
                                    y: r.top + this.clientTop + (parseFloat(s.paddingTop) || 0),
                                    w: r.width - (parseFloat(s.paddingLeft) || 0) - (parseFloat(s.paddingRight) || 0),
                                    h: r.height - (parseFloat(s.paddingTop) || 0) - (parseFloat(s.paddingBottom) || 0),
                                };
                            }`,returnByValue:!0},b);y&&y.result&&y.result.value&&(S=y.result.value.x,k=y.result.value.y,q=y.result.value.w,J=y.result.value.h,D=!0)}}catch{}D&&(l=l??S,R=R??k,A=A??q,F=F??J),c+=S,d+=k,i=x,u=b}catch{return null}}return{x:c,y:d,w:h,h:g,fx:l??0,fy:R??0,fw:A??0,fh:F??0}}async function ye(e,t,n=5){let r=C.get(e);if(!r)return null;for(let o=0;o<n;o++){for(let[s,a]of r.entries()){let i=s==="root"?{tabId:e}:{tabId:e,sessionId:s};for(let u=a.length-1;u>=0;u--){let c=a[u];try{let d=await chrome.debugger.sendCommand(i,"Runtime.evaluate",{expression:`document.documentElement.getAttribute('data-frame-token') === '${t}'`,contextId:c.contextId,returnByValue:!0});if(d.result&&d.result.value===!0)return{sessionId:s==="root"?void 0:s,frameId:c.frameId}}catch(d){d.message&&d.message.includes("Cannot find context")&&a.splice(u,1)}}}await B(50)}return null}function he(e,t){if(e.frame.id===t)return{...e.frame,parentId:e.frame.parentId};if(e.childFrames)for(let n of e.childFrames){let r=he(n,t);if(r!==null)return r}return null}async function Ve(e,t,n){if(!T()||(e=e??await I(),e===null))return null;await $(e),t=t??0;let r=await ye(e,n);if(r===null)return null;let o=await _e(e,r.frameId,r.sessionId,0,0);return o===null?null:{x:o.fx,y:o.fy,w:o.fw,h:o.fh}}function He(e,t,n,r,o){let s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*r+Math.pow(e,3)*o}function ot(e){return 1-Math.pow(1-e,3)}async function qe(e,t=2,n=32){let r=t+(1-Math.sin(Math.PI*e))*(n-t);await B(r)}var at=100,st=6e4,me=new Map;function pe(e,t,n=1){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n}async function it(e,t,n,r,o,s=1500){o==="red"?o="rgba(255, 96, 128, 0.5)":o==="blue"?o="rgba(5, 184, 255, 0.4)":o==="darkblue"&&(o="rgba(10, 149, 255, 0.2)");let i=`(function() {
        requestAnimationFrame(() => {
            const dot = document.createElement('div')
            document.documentElement.appendChild(dot)
            dot.style.cssText = '${`
        position: fixed !important;
        opacity: 1;
        width: 1px;
        height: 1px;
        top: ${n}px !important;
        left: ${t}px !important;
        background-color: ${o} !important;
        border: ${Math.max(1,r/20)}px solid white !important;
        border-radius: 50% !important;
        z-index: 2147483647 !important;
        pointer-events: none !important;
        transform: translate(-50%, -50%) !important;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.25) !important;
        transition:
            opacity ${s}ms ease-in,
            width 500ms ease-out,
            height 500ms ease-out
            !important;
    `.replace(/\n/g," ")}'
            setTimeout(() => {
                dot.style.opacity = '0'
                dot.style.width = '${r}px'
                dot.style.height = '${r}px'
            }, 10)
            setTimeout(() => dot.remove(), ${s} + 1_000)
        })
    })()`;try{await v(e,"Runtime.evaluate",{expression:i})}catch{}}async function We(e,t,n){if(!T()||(e=e??await I(),e===null)||!await $(e))return!1;t=t??0;let o=await ye(e,n);return!(o===null||await _e(e,o.frameId,o.sessionId,0,0)===null)}async function ne(e,t,n,r,o,s,a,i,u){if(!T()||(e=e??await I(),e===null))return!1;await $(e),t=t??0;let c=await ye(e,n);if(c===null)return!1;let d=await _e(e,c.frameId,c.sessionId,o,s);if(d===null)return!1;let{x:h,y:g,w:l,h:R}=d;return await W(e,r,h,g,l,R,a,i,u)}async function W(e,t,n,r,o,s,a,i,u){if(!T()||(e=e??await I(),e===null))return!1;if(await $(e),o===void 0&&s===void 0){let m=await ze(e);m!==null&&(o=m.w,s=m.h)}o=o??0,s=s??0;let c=me.get(e)||{positions:[],timeout:null};clearTimeout(c.timeout),c.timeout=setTimeout(()=>me.delete(e),st);let d=[...c.positions];for(let m=d.length;m<2;m++)d.push({x:n+(Math.random()-.5)*o,y:r+(Math.random()-.5)*s});let h=d.slice().reverse(),g={x:n,y:r},l=h.find(m=>!pe(m,g))||null,R=h.find(m=>!pe(m,g)&&!pe(m,l))||null,A=64,F=8;if(l&&(l.x!==n||l.y!==r))if(u==="linear"){let m=Math.hypot(n-l.x,r-l.y),_=Math.min(A,Math.ceil(m/F));for(let x=1;x<=_;x++){let b=x/_,p={x:x===_?0:(Math.random()-.5)*2,y:x===_?0:(Math.random()-.5)*2},S={x:l.x+(n-l.x)*b+p.x,y:l.y+(r-l.y)*b+p.y};await be(e,"mouseMoved",S.x,S.y,a,0),await qe(b),new Set([_+3,Math.ceil(_*.25),Math.ceil(_*.5),Math.ceil(_*.75),_-3]).has(x)&&d.push(S)}}else{let m=g.x-l.x,_=g.y-l.y,x=Math.hypot(m,_),b=l,p={x:0,y:0},S={x:0,y:0},k=g;if(R){let P=Math.hypot(l.x-R.x,l.y-R.y);if(P>1){let X=(l.x-R.x)/P,K=(l.y-R.y)/P,z=x*.5;p.x=l.x+X*z,p.y=l.y+K*z}}else p.x=b.x+(k.x-b.x)*.2+(Math.random()-.5)*50,p.y=b.y+(k.y-b.y)*.2+(Math.random()-.5)*50;let q=-_,J=m,D=Math.random()>.5?1:-1,M=x*(.2+Math.random()*.3);S.x=n-m*.4+q/x*M*D,S.y=r-_*.4+J/x*M*D;let y=Math.min(A,Math.ceil(x*1.2/F));for(let P=1;P<=y;P++){let X={x:P===y?0:(Math.random()-.5)*2,y:P===y?0:(Math.random()-.5)*2},K=P/y,z=ot(K),oe={x:He(z,b.x,p.x,S.x,k.x)+X.x,y:He(z,b.y,p.y,S.y,k.y)+X.y};await be(e,"mouseMoved",oe.x,oe.y,a,0),await qe(K),new Set([y+3,Math.ceil(y*.25),Math.ceil(y*.5),Math.ceil(y*.75),y-3]).has(P)&&d.push(oe)}}return d.push(g),me.set(e,{positions:d.slice(-at),timeout:c.timeout}),await be(e,t,n,r,a,i)}async function be(e,t,n,r,o,s){await it(e,n,r,t==="mouseMoved"?10:40,t==="mouseMoved"?"darkblue":"blue",t==="mouseMoved"?1500:2e3),o=o??"left",s=s??1,t==="mouseMoved"&&(s=0);let a={type:t,x:n,y:r,button:o,buttons:je[o]??0,clickCount:s};return await v(e,"Input.dispatchMouseEvent",a)!==null}async function Xe(e,t,n,r,o,s,a){if(!T()||(e=e??await I(),e===null))return!1;await $(e),s=s??"left",a=a??30;let i=await ne(e,t,n,"mousePressed",r,o,s);await B(a);let u=await ne(e,t,n,"mouseReleased",r,o,s);return i&&u}async function Ke(e,t,n,r,o){if(!T()||(e=e??await I(),e===null))return!1;await $(e),r=r??"left",o=o??30;let s=await W(e,"mousePressed",t,n,void 0,void 0,r);await B(o);let a=await W(e,"mouseReleased",t,n,void 0,void 0,r);return s&&a}var ut={"echo::sender":(e,t)=>t,"log::getLogs":Ee,"settings::get":j,"settings::update":([e])=>Fe(e),"api::fetchStatus":te,"api::getCachedStatus":Oe,"api::recognition":([e])=>De(e),"tab::getCurrentId":U,"tab::getCurrentJSON":Ie,"tab::getCurrentURL":Ce,"tab::getURL":Be,"tab::registerDetectedCaptcha":Se,"tab::getDetectedCaptchas":Re,"tab::broadcast":([e])=>Ae(e),"fetch::universalFetch":Ue,"fetch::asData":Ne,"locator::inject":(e,t)=>Ge(t?.tab?.id),"debugger::attach":(e,t)=>re(t?.tab?.id),"debugger::enable":(e,t)=>$(t?.tab?.id),"debugger::detach":(e,t)=>Je(t?.tab?.id),"debugger::command":([e,t],n)=>v(n?.tab?.id,e,t),"debugger::mouseCapable":([e],t)=>We(t?.tab?.id,t?.frameId,e),"debugger::mouse":([e,t,n,r,o,s,a],i)=>ne(i?.tab?.id,i?.frameId,e,t,n,r,o,s,a),"debugger::mouseAbs":([e,t,n,r,o,s],a)=>W(a?.tab?.id,e,t,n,void 0,void 0,r,o,s),"debugger::click":([e,t,n,r,o],s)=>Xe(s?.tab?.id,s?.frameId,e,t,n,r,o),"debugger::clickAbs":([e,t,n,r],o)=>Ke(o?.tab?.id,e,t,n,r),"debugger::locateFrame":([e],t)=>Ve(t?.tab?.id,t?.frameId,e)};w.runtime.onMessage.addListener((e,t,n)=>{let r=Te(e[0]),o=e[1],s=e.slice(2),a=ut[o];return a?(Promise.resolve(a(s,t)).then(i=>{n([r,i])}).catch(i=>{n([r,""+i])}),!0):(n([r,null]),!0)});})();
